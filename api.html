<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rawiwam Potikul</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <script src="sensor.js"></script>
    <section class="welcome">
        <div class="welcome-text">
            <h1>Welcome to my resume</h1>
        </div>
    </section>
    <nav>
        <ul class="menu">
            <li><a href="index.html#profile">Profile</a></li>
            <li><a href="Education.html#education">Education</a></li>
            <li><a href="Internship.html#internship">Internship Experience</a></li>
            <li><a href="grades.html#grades">Subject scores</a></li>
            <li><a href="contact.html#contact">Contact Information</a></li>
            <li><a href="api.html#api"onclick="scrollToSection('api')">API</a></li>
        </ul>
    </nav>
    <section class="api" id="api">
        <h1>API</h1>
    </section
    class="under-box-api">
                <div class="api-table">
                    <table border ="2" width="200">
                        <tr>
                            <th>Sensor</th>
                            <th>Value</th>
                            <th>Unit</th>
                        </tr>
    
                        <tr>
                            <th>Timestamp</th>
                            <th><h1 id="time" ></h1></th>
                            <th>Second</th>
                        </tr>
                        <tr>
                            <th>Temperature</th>
                            <th><h1 id="temp"></h1></th>
                            <th>° C</th>
                        </tr>
                        <tr>
                            <th>Luxsensor</th>
                            <th><h1 id="lux"></h1></th>
                            <th>Lux</th>
                    </tr>
                    <tr>
                            <th>Humidity</th>
                            <th><h1 id="hum"></h1></th>
                            <th>%RH</th>
                    </tr>
                        <tr>
                            <th>Motion</th>
                            <th><h1 id="mot"></h1></th>
                            <th>-</th>
                        </tr>
                    </table>
                </div>

                <div class="api-post">
                    <form onsubmit="event.preventDefault(); submitData();">
                        <div class="api-post-box-name">
                            <p class="text-titlebox">Name : </p>
                            <input class="box-input-text" type="text" id="studentName" required placeholder="Enter Student Name">
                        </div>
                        <div class="api-post-box-id">
                            <p class="text-titlebox">ID : </p>
                            <input class="box-input-text" type="text" id="studentId" required placeholder="Enter Student ID">
                        </div>
                        <div class="api-post-box-sent">
                            <input class="box-sent-submit" type="submit">
                        </div>
                    </form>
                </div>
                <script>
                    async function submitData() {
                        // รับข้อมูลจากฟอร์ม
                        const studentId = document.getElementById("studentId").value;
                        const studentName = document.getElementById("studentName").value;
                
                        // สร้างข้อมูลในรูปแบบ JSON
                        const data = {
                            id: studentId,
                            name: studentName
                        };
                
                        // ส่งข้อมูลไปยัง API โดยใช้ fetch
                        try {
                            const response = await fetch("https://206.189.146.138/api/students", {
                                method: "POST",
                                headers: {
                                    "Content-Type": "application/json"
                                },
                                body: JSON.stringify(data)
                            });
                
                            if (response.ok) {
                                alert("Sendsuccess!");
                            } else {
                                alert("Send fail.");
                            }
                        } catch (error) {
                            console.error("Error:", error);
                            alert("Send fail.");
                        }
                    }
                  </script>
    </section>

</body>

</html>

</html>